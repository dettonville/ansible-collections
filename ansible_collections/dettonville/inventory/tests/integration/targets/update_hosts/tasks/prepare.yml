---

- name: "Display primary role input variables"
  debug:
    var: __inventory_git_ssh_private_keydir

- name: "Check if git private ssh key exist at {{ __inventory_git_ssh_private_keyfile }}"
  stat:
    path: "{{ __inventory_git_ssh_private_keyfile }}"
  register: private_key

- name: "Ensure git private key is present at {{ __inventory_git_ssh_private_keydir }}/{{ __inventory_git_ssh_private_keyfile }}"
  copy:
    content: "{{ __inventory_git_ssh_private_key }}"
    dest: "{{ __inventory_git_ssh_private_keydir }}/{{ __inventory_git_ssh_private_keyfile }}"
    mode: "0600"
    backup: yes
  no_log: yes

#- name: "Configure git configs"
#  dettonville.utils.git_config:
#    scope: global
#    name: "{{ item.name }}"
#    value: "{{ item.value }}"
#  loop:
#    - name: user.name
#      value: "{{ __inventory_git_user }}"
#    - name: user.email
#      value: "{{ __inventory_git_email }}"

